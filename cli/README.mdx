---
sidebar_label: CLI
---

import CodeBlock from '@theme/CodeBlock';

import packageJson from '!!raw-loader!./package.json';
import cliConfigTs from '!!raw-loader!./vircadia.cli.config.ts';

# CLI

The Vircadia World CLI provides a set of commands to manage the Vircadia World's services in dev and production environments.

## Prerequisites

* [Bun](https://bun.sh/)
* [Docker](https://www.docker.com/)

## Quick Start

```bash
bun run project:init
```

Be sure to accept the default values for the configuration.

Then test your deployment by running the following command:

```bash
bun run server:health-all
```

Then run the test client in a new tab:

```bash
bun run dev:client:web_babylon_js
```

You can also run the client in a second tab to test the syncing of the state between the two clients.

### Resetting the World

To reset the world, run the following command, only resetting the database:

```bash
bun run server:postgres:reset
```

If you need to do a full reset, you can run the following command, which will rebuild all the services and reset the database:

```bash
bun run server:rebuild-all
```

## Available Commands

:::danger

Currently, there are no warnings about the destructiveness of some of these commands, thus you should understand what you are doing before running them.

:::

### Project Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('project:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Install Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('install:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Dev Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('dev:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Test Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('test:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Server Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('server:') && !key.startsWith('server:postgres:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Server Postgres Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('server:postgres:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Client Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('client:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Clean Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('clean:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

### Build Commands

{(() => {
  const pkg = JSON.parse(packageJson);
  const commands = Object.entries(pkg.scripts)
    .filter(([key]) => key.startsWith('build:'))
    .map(([key, value]) => ({ key, value }));
  
  return (
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {commands.map(({key, value}) => (
          <tr key={key}>
            <td><code>bun run {key}</code></td>
            <td>{value}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
})()}

## Configuration

The CLI can be configured by setting the environment variables before using the CLI.

<CodeBlock language="typescript" title="vircadia.cli.config.ts">
  {cliConfigTs}
</CodeBlock>