---
sidebar_label: CLI
---

import CodeBlock from '@theme/CodeBlock';
import cliConfigTs from '!!raw-loader!./vircadia.cli.config.ts';

# CLI

The Vircadia World CLI provides a set of commands to manage the Vircadia World's services in dev and production environments.

## Prerequisites

* [Bun](https://bun.sh/)
* [Docker](https://www.docker.com/)
* [Node.js](https://nodejs.org/) (>= 22.10.0)

## Quick Start

Follow these steps to install dependencies, build modules, and start the services.

### 1. Install Dependencies

Install all project dependencies (dependencies are shared across workspaces).

```bash
bun run cli all install
```

### 2. Build Modules

Build the SDK (and other modules). This is critical as API services depend on the SDK.

```bash
bun run cli sdk build
```

Optionally, you can build all buildable modules (SDK, Client):

```bash
bun run cli all build
```

### 3. Start & Build Containers

Start the core services (Postgres, API services) and build their containers.

```bash
bun run cli core up --build -d
```

### 4. Setup Database

Once the database container is healthy, run migrations and seed the database.

```bash
# Check health (optional)
bun run cli core health

# Run migrations
bun run cli db migrate

# Seed database with initial data
bun run cli db seed
```

### 5. Start Client

Start the web client in development mode.

```bash
bun run cli client dev
```

## Available Commands

The CLI supports various commands for managing dependencies, containers, and the database.

### General Syntax

```bash
bun run cli <target> <action> [flags]
```

### Container Commands

| Command | Description |
|---|---|
| `bun run cli core up -d` | Start core services (Postgres + APIs) detached |
| `bun run cli core up --build -d` | Build and start core services |
| `bun run cli all down` | Stop and remove all containers |
| `bun run cli core restart` | Restart core services |
| `bun run cli core logs --follow` | View logs for core services |
| `bun run cli core health` | Check health of core services |
| `bun run cli all clean` | Stop and remove all containers and volumes |

### Dependency Commands

| Command | Description |
|---|---|
| `bun run cli all install` | Install dependencies for all workspaces |
| `bun run cli sdk build` | Build the TypeScript SDK |
| `bun run cli client build` | Build the Web Babylon.js client |
| `bun run cli all build` | Build all modules |
| `bun run cli client dev` | Start client development server |

### Database Commands

| Command | Description |
|---|---|
| `bun run cli db migrate` | Run database migrations |
| `bun run cli db seed` | Seed database with initial data |
| `bun run cli db backup` | Backup the database |
| `bun run cli db restore` | Restore the database |
| `bun run cli db wipe` | Wipe the database |
| `bun run cli db token` | Generate an admin token |

## Configuration

The CLI can be configured by setting the environment variables before using the CLI.

<CodeBlock language="typescript" title="vircadia.cli.config.ts">
  {cliConfigTs}
</CodeBlock>
